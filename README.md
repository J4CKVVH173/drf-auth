# drf-auth

Библиотека является оберткой над `communicate-api` для расширения ее функционала. `drf-auth` представляет
собой прослойку, позволяющую производить аутенфикацию пользователя по токену, в связке с `django-rest-framework` и
`django-rest-auth`.

`django-rest-auth` необязательна, главное чтобы присутсвовали эндпоинты для указанных ниже методов.

## Использование

### v1.0.0

#### Session
При создании объекта `drf-auth`, будет создана сессия `axios`, которая будет сохранена в поле `session` объекта
`drf-auth`. После этого `session` будет обладать всеми стандартными методами предоставляемыми объектом `axios`.

#### Login
Метод `login`используется для входа пользователя. Это асинхронная функция, которая на вход принимает два
аргумента: `username` и `password`. В случае успешного запроса, фукнция установит заголовок с токеном и сохранит его
в `localStorage`, и возвращает объект с токеном. В случае неудачи будет вызвана ошибка.

Метод `login` делает `post` запрос по урлу `<baseURL>/<authPath>/login/`;

#### Logout
Метод `logout` используется для выхода пользователя. Это асинхронная функция без аргументов. В случае успешного запроса,
метод удаляет токен из заголовка из стореджа и заголовка и возвращает объект с ответом сервера. В случае неудачи
будет вызвана ошибка.

Метод `login` делает `post` запрос по урлу `<baseURL>/<authPath>/logout/`;

#### Настройка объекта `drf-auth`

Для передачи настроек для `axios`, при создании объекта `drf-auth` в конструктор класса необходимо
передать объект со свойством `axiosConfig`, которое содержит настройки для сессии `axios`. Список настроек можно
посмотреть в документации `axios`.

Для определения `authPath` на которым располагаются методы для `login`, `logout` и т.д., необходмо передать в конструктор
класса объект со свойством `authPath`, со значением пути по которому будут обращаться методы. По умолчанию используется
значение `rest-auth`.

Пример: url запроса для метода `login` будет иметь вид `<authPath>/login/`.
